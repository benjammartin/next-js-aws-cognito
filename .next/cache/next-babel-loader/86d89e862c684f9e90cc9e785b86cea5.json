{"ast":null,"code":"var _jsxFileName = \"/Users/benjamin/Desktop/perso/ventejob/modules/auth/components/signup/index.jsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Field, Button } from \"@/commons/components\";\nimport useForm from \"@/commons/components/form/useForm\";\nimport { Half } from \"@/commons/components/form/field/layout\";\nimport { createUser } from \"services/auth\";\nimport Router from \"next/router\";\nconst stateSchema = {\n  lastname: {\n    value: \"\",\n    error: \"\",\n    required: true\n  },\n  firstname: {\n    value: \"\",\n    error: \"\",\n    required: true\n  },\n  email: {\n    value: \"\",\n    error: \"\",\n    required: true\n  },\n  password: {\n    value: \"\",\n    error: \"\",\n    required: true\n  }\n};\n\nasync function onSubmitForm(state, setMeta) {\n  try {\n    let res = await createUser.signup(state.firstname.value, state.lastname.value, state.email.value, state.password.value);\n    Router.push({\n      pathname: \"/auth/confirmation\",\n      query: {\n        email: res.getUsername()\n      }\n    });\n  } catch (e) {\n    setMeta({\n      message: e.message\n    });\n  }\n}\n\nfunction Signup() {\n  const {\n    state,\n    handleOnChange,\n    handleOnSubmit,\n    disable,\n    meta,\n    setMeta\n  } = useForm(stateSchema, onSubmitForm);\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, \"Signup component\"), __jsx(\"form\", {\n    onSubmit: handleOnSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, __jsx(Half, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, __jsx(Field, {\n    onChange: handleOnChange,\n    label: \"Nom\",\n    name: \"lastname\",\n    type: \"text\",\n    placeholder: \"Julie\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }), __jsx(Field, {\n    onChange: handleOnChange,\n    label: \"Pr\\xE9nom\",\n    name: \"firstname\",\n    type: \"text\",\n    placeholder: \"Martin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  })), __jsx(Field, {\n    onChange: handleOnChange,\n    label: \"Email\",\n    type: \"text\",\n    name: \"email\",\n    placeholder: \"julie.martn@gmail.com\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }), __jsx(Field, {\n    onChange: handleOnChange,\n    label: \"Mot de passe\",\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"+7 lettres\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }), __jsx(Button, {\n    type: \"submit\",\n    onChange: handleOnChange,\n    size: \"large\",\n    kind: \"primary\",\n    disabled: disable,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"Submit\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, meta && meta.message)));\n}\n\nexport default Signup;","map":{"version":3,"sources":["/Users/benjamin/Desktop/perso/ventejob/modules/auth/components/signup/index.jsx"],"names":["React","Field","Button","useForm","Half","createUser","Router","stateSchema","lastname","value","error","required","firstname","email","password","onSubmitForm","state","setMeta","res","signup","push","pathname","query","getUsername","e","message","Signup","handleOnChange","handleOnSubmit","disable","meta"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Field, Button } from \"@/commons/components\";\nimport useForm from \"@/commons/components/form/useForm\";\nimport { Half } from \"@/commons/components/form/field/layout\";\nimport { createUser } from \"services/auth\";\nimport Router from \"next/router\";\n\nconst stateSchema = {\n  lastname: { value: \"\", error: \"\", required: true },\n  firstname: { value: \"\", error: \"\", required: true },\n  email: { value: \"\", error: \"\", required: true },\n  password: { value: \"\", error: \"\", required: true }\n};\n\nasync function onSubmitForm(state, setMeta) {\n  try {\n    let res = await createUser.signup(\n      state.firstname.value,\n      state.lastname.value,\n      state.email.value,\n      state.password.value\n    );\n    Router.push({\n      pathname: \"/auth/confirmation\",\n      query: { email: res.getUsername() }\n    });\n  } catch (e) {\n    setMeta({ message: e.message });\n  }\n}\n\nfunction Signup() {\n  const {\n    state,\n    handleOnChange,\n    handleOnSubmit,\n    disable,\n    meta,\n    setMeta\n  } = useForm(stateSchema, onSubmitForm);\n\n  return (\n    <div>\n      <h2>Signup component</h2>\n      <form onSubmit={handleOnSubmit}>\n        <Half>\n          <Field\n            onChange={handleOnChange}\n            label=\"Nom\"\n            name=\"lastname\"\n            type=\"text\"\n            placeholder=\"Julie\"\n          />\n          <Field\n            onChange={handleOnChange}\n            label=\"PrÃ©nom\"\n            name=\"firstname\"\n            type=\"text\"\n            placeholder=\"Martin\"\n          />\n        </Half>\n        <Field\n          onChange={handleOnChange}\n          label=\"Email\"\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"julie.martn@gmail.com\"\n        />\n        <Field\n          onChange={handleOnChange}\n          label=\"Mot de passe\"\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"+7 lettres\"\n        />\n        <Button\n          type=\"submit\"\n          onChange={handleOnChange}\n          size=\"large\"\n          kind=\"primary\"\n          disabled={disable}\n        >\n          Submit\n        </Button>\n        <p>{meta && meta.message}</p>\n      </form>\n    </div>\n  );\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}