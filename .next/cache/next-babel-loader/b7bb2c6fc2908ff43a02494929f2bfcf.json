{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useCallback } from 'react';\n\nfunction useForm(stateSchema, callback) {\n  _s();\n\n  var _useState = useState(stateSchema),\n      state = _useState[0],\n      setState = _useState[1];\n\n  var _useState2 = useState(null),\n      meta = _useState2[0],\n      setMeta = _useState2[1];\n\n  var _useState3 = useState(true),\n      disable = _useState3[0],\n      setDisable = _useState3[1];\n\n  var _useState4 = useState(false),\n      isDirty = _useState4[0],\n      setIsDirty = _useState4[1];\n\n  useEffect(function () {\n    setDisable(true);\n  }, []);\n  useEffect(function () {\n    isDirty && setDisable(validateState());\n  }, [state, isDirty]);\n  var validateState = useCallback(function () {\n    var hasErrorInState = Object.keys(stateSchema).some(function (key) {\n      var isInputFieldRequired = stateSchema[key].required;\n      var stateValue = state[key].value; // state value\n\n      var stateError = state[key].error; // state error\n\n      return isInputFieldRequired && !stateValue || stateError;\n    });\n    return hasErrorInState;\n  }, [state, stateSchema]);\n  var handleOnChange = useCallback(function (event) {\n    setIsDirty(true);\n    setMeta(null);\n    var name = event.target.name;\n    var value = event.target.value;\n    var error = '';\n\n    if (stateSchema[name].required) {\n      if (!value) {\n        error = 'This is required field.';\n      }\n    }\n\n    if (stateSchema[name].validator !== null && typeof stateSchema[name].validator === 'object') {\n      if (value && !stateSchema[name].validator.regEx.test(value)) {\n        error = stateSchema[name].validator.error;\n      }\n    }\n\n    setState(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, name, {\n        value: value,\n        error: error\n      }));\n    });\n  }, [stateSchema]);\n  var handleOnSubmit = useCallback(function (event) {\n    event.preventDefault();\n\n    if (!validateState()) {\n      callback(state, setMeta);\n    }\n  }, [state]);\n  return {\n    state: state,\n    disable: disable,\n    handleOnChange: handleOnChange,\n    handleOnSubmit: handleOnSubmit,\n    meta: meta,\n    setState: setState,\n    setMeta: setMeta\n  };\n}\n\n_s(useForm, \"BQRxKgFSJwTe1/DcbP09QP4RpIg=\");\n\nexport default useForm;","map":{"version":3,"sources":["/Users/benjamin/Desktop/perso/ventejob/modules/commons/components/form/useForm.js"],"names":["useState","useEffect","useCallback","useForm","stateSchema","callback","state","setState","meta","setMeta","disable","setDisable","isDirty","setIsDirty","validateState","hasErrorInState","Object","keys","some","key","isInputFieldRequired","required","stateValue","value","stateError","error","handleOnChange","event","name","target","validator","regEx","test","prevState","handleOnSubmit","preventDefault"],"mappings":"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","sourcesContent":["import {\n  useState,\n  useEffect,\n  useCallback\n} from 'react';\n\n\nfunction useForm(stateSchema, callback) {\n  const [state, setState] = useState(stateSchema);\n  const [meta, setMeta] = useState(null)\n  const [disable, setDisable] = useState(true);\n  const [isDirty, setIsDirty] = useState(false);\n\n  useEffect(() => {\n    setDisable(true)\n  }, [])\n\n\n  useEffect(() => {\n    isDirty && setDisable(validateState())\n  }, [state, isDirty])\n\n  const validateState = useCallback(() => {\n    const hasErrorInState = Object.keys(stateSchema).some(key => {\n      const isInputFieldRequired = stateSchema[key].required;\n      const stateValue = state[key].value; // state value\n      const stateError = state[key].error; // state error\n\n      return (isInputFieldRequired && !stateValue) || stateError;\n    });\n\n    return hasErrorInState;\n  }, [state, stateSchema]);\n\n\n  const handleOnChange = useCallback(\n    event => {\n      setIsDirty(true);\n      setMeta(null);\n\n      const name = event.target.name;\n      const value = event.target.value;\n\n      let error = '';\n      if (stateSchema[name].required) {\n        if (!value) {\n          error = 'This is required field.';\n        }\n      }\n\n      if (\n        stateSchema[name].validator !== null &&\n        typeof stateSchema[name].validator === 'object'\n      ) {\n        if (value && !stateSchema[name].validator.regEx.test(value)) {\n          error = stateSchema[name].validator.error;\n        }\n      }\n\n      setState(prevState => ({\n        ...prevState,\n        [name]: {\n          value,\n          error\n        },\n      }));\n    },\n    [stateSchema]\n  );\n  const handleOnSubmit = useCallback(\n    event => {\n      event.preventDefault();\n      if (!validateState()) {\n        callback(state, setMeta);\n      }\n    },\n    [state]\n  );\n  return {\n    state,\n    disable,\n    handleOnChange,\n    handleOnSubmit,\n    meta,\n    setState,\n    setMeta\n  };\n}\n\nexport default useForm;"]},"metadata":{},"sourceType":"module"}