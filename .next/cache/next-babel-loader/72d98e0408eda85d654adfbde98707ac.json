{"ast":null,"code":"var _jsxFileName = \"/Users/benjamin/Desktop/perso/ventejob/modules/auth/components/signin/index.jsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Field, Button } from \"@/commons/components\";\nimport useForm from \"@/commons/components/form/useForm\";\nimport { createUser } from \"services/auth\";\nimport { useMutation, queryCache } from \"react-query\";\nimport Router from \"next/router\";\nconst stateSchema = {\n  email: {\n    value: \"\",\n    error: \"\",\n    required: true\n  },\n  password: {\n    value: \"\",\n    error: \"\",\n    required: true\n  }\n};\n\nfunction Signin() {\n  const {\n    handleOnChange,\n    handleOnSubmit,\n    disable,\n    meta,\n    setMeta\n  } = useForm(stateSchema, onSubmitForm);\n\n  const onSignin = ({\n    email,\n    password\n  }) => createUser.signin(email, password);\n\n  const [mutate, {\n    status,\n    data,\n    error\n  }] = useMutation(onSignin, {\n    onSuccess: () => {\n      queryCache.refetchQueries(\"hassession\").then(() => Router.push(\"/\"));\n    },\n    onError: e => {\n      setMeta({\n        message: e.message\n      });\n    }\n  });\n\n  function onSubmitForm(state) {\n    mutate({\n      email: state.email.value,\n      password: state.password.value\n    });\n  }\n\n  console.log(status);\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, \"Signin component\"), __jsx(\"form\", {\n    onSubmit: handleOnSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, __jsx(Field, {\n    onChange: handleOnChange,\n    label: \"Email\",\n    type: \"text\",\n    name: \"email\",\n    placeholder: \"julie.martn@gmail.com\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }), __jsx(Field, {\n    onChange: handleOnChange,\n    label: \"Mot de passe\",\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"+7 lettres\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }), __jsx(Button, {\n    type: \"submit\",\n    onChange: handleOnChange,\n    size: \"large\",\n    kind: \"secondary\",\n    disabled: disable,\n    loading: status === \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"Submit\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, meta && meta.message)));\n}\n\nexport default Signin;","map":{"version":3,"sources":["/Users/benjamin/Desktop/perso/ventejob/modules/auth/components/signin/index.jsx"],"names":["React","Field","Button","useForm","createUser","useMutation","queryCache","Router","stateSchema","email","value","error","required","password","Signin","handleOnChange","handleOnSubmit","disable","meta","setMeta","onSubmitForm","onSignin","signin","mutate","status","data","onSuccess","refetchQueries","then","push","onError","e","message","state","console","log"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Field, Button } from \"@/commons/components\";\nimport useForm from \"@/commons/components/form/useForm\";\nimport { createUser } from \"services/auth\";\nimport { useMutation, queryCache } from \"react-query\";\nimport Router from \"next/router\";\n\nconst stateSchema = {\n  email: { value: \"\", error: \"\", required: true },\n  password: { value: \"\", error: \"\", required: true },\n};\n\nfunction Signin() {\n  const { handleOnChange, handleOnSubmit, disable, meta, setMeta } = useForm(\n    stateSchema,\n    onSubmitForm\n  );\n\n  const onSignin = ({ email, password }) => createUser.signin(email, password);\n\n  const [mutate, { status, data, error }] = useMutation(onSignin, {\n    onSuccess: () => {\n      queryCache.refetchQueries(\"hassession\").then(() => Router.push(\"/\"));\n    },\n    onError: (e) => {\n      setMeta({ message: e.message });\n    },\n  });\n\n  function onSubmitForm(state) {\n    mutate({ email: state.email.value, password: state.password.value });\n  }\n\n  console.log(status);\n\n  return (\n    <div>\n      <h2>Signin component</h2>\n      <form onSubmit={handleOnSubmit}>\n        <Field\n          onChange={handleOnChange}\n          label=\"Email\"\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"julie.martn@gmail.com\"\n        />\n        <Field\n          onChange={handleOnChange}\n          label=\"Mot de passe\"\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"+7 lettres\"\n        />\n        <Button\n          type=\"submit\"\n          onChange={handleOnChange}\n          size=\"large\"\n          kind=\"secondary\"\n          disabled={disable}\n          loading={status === \"loading\"}\n        >\n          Submit\n        </Button>\n        <p>{meta && meta.message}</p>\n      </form>\n    </div>\n  );\n}\n\nexport default Signin;\n"]},"metadata":{},"sourceType":"module"}